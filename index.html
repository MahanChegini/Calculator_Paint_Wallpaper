<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>محاسبه‌گر تخصصی طراحی داخلی</title>
<link href="https://cdn.jsdelivr.net/gh/rastikerdar/vazir-font@v30.1.0/dist/font-face.css" rel="stylesheet" />
<style>
  * {
    box-sizing: border-box;
  }
  body {
    margin: 0; 
    font-family: 'Vazir', Tahoma, sans-serif;
    background: #f7f9fc;
    color: #333;
    min-height: 100vh;
    padding: 20px;
    transition: background-color 0.4s,color 0.4s;
    direction: rtl;
    display: flex;
    justify-content: center;
    align-items: center;
  }
  body.dark {
    background: #121212;
    color: #eee;
  }
  .container {
    max-width: 480px;
    width: 100%;
    background: rgba(255 255 255 / 0.85);
    padding: 30px 30px 40px;
    border-radius: 20px;
    box-shadow: 0 8px 20px rgba(0,0,0,0.12);
    backdrop-filter: blur(12px);
    transition: background-color 0.4s,color 0.4s;
  }
  body.dark .container {
    background: rgba(18 18 18 / 0.8);
    box-shadow: 0 8px 24px rgba(255 255 255 / 0.12);
  }
  header {
    text-align: center;
    margin-bottom: 25px;
    user-select: none;
  }
  header h1 {
    font-weight: 700;
    font-size: 1.8rem;
    letter-spacing: 1px;
  }
  .toggle-theme {
    position: fixed;
    top: 20px;
    left: 20px;
    background: transparent;
    border: none;
    font-size: 1.9rem;
    cursor: pointer;
    color: #333;
    transition: color 0.4s;
    user-select: none;
    z-index: 1000;
  }
  body.dark .toggle-theme {
    color: #eee;
  }
  form {
    display: flex;
    flex-direction: column;
    gap: 16px;
  }
  label {
    font-weight: 600;
    margin-bottom: 6px;
    display: block;
  }
  select, input[type="number"] {
    width: 100%;
    padding: 10px 12px;
    font-size: 1rem;
    border: 2px solid #ccc;
    border-radius: 10px;
    background: #fafafa;
    transition: border-color 0.3s;
    font-family: 'Vazir', Tahoma, sans-serif;
    color: #333;
    outline-offset: 2px;
  }
  select:focus, input[type="number"]:focus {
    border-color: #357edd;
    background: #fff;
  }
  body.dark select, 
  body.dark input[type="number"] {
    background: #222;
    border-color: #555;
    color: #eee;
  }
  body.dark select:focus, 
  body.dark input[type="number"]:focus {
    border-color: #5a9bf6;
    background: #333;
  }
  .helper-text {
    font-size: 0.85rem;
    color: #666;
    margin-top: -10px;
    margin-bottom: 8px;
    user-select: none;
  }
  body.dark .helper-text {
    color: #bbb;
  }
  button[type="submit"] {
    padding: 14px;
    font-size: 1.15rem;
    font-weight: 700;
    border-radius: 15px;
    border: none;
    background: #357edd;
    color: white;
    cursor: pointer;
    transition: background-color 0.3s;
    user-select: none;
    box-shadow: 0 4px 12px rgb(53 126 221 / 0.5);
  }
  button[type="submit"]:hover {
    background: #2b62c7;
  }
  body.dark button[type="submit"] {
    background: #5a9bf6;
    box-shadow: 0 4px 12px rgb(90 155 246 / 0.7);
  }
  body.dark button[type="submit"]:hover {
    background: #4d86db;
  }
  .result-box {
    margin-top: 30px;
    background: rgba(53, 126, 221, 0.1);
    border-radius: 15px;
    padding: 20px 25px;
    font-size: 1rem;
    color: #1a2a52;
    user-select: none;
    box-shadow: 0 0 12px rgba(53,126,221,0.15);
    transition: background-color 0.4s, color 0.4s;
    white-space: pre-wrap;
  }
  body.dark .result-box {
    background: rgba(90, 155, 246, 0.2);
    color: #dbe9ff;
    box-shadow: 0 0 14px rgba(90,155,246,0.6);
  }
  @media (max-width: 520px) {
    .container {
      max-width: 95vw;
      padding: 20px;
    }
    header h1 {
      font-size: 1.4rem;
    }
  }
</style>
</head>
<body>
<button class="toggle-theme" id="toggleTheme" aria-label="تغییر تم تاریک و روشن">🌙</button>
<div class="container" role="main">
  <header>
    <h1>محاسبه‌گر تخصصی طراحی داخلی</h1>
  </header>

  <form id="calcForm" novalidate>
    <label for="space">نام فضا</label>
    <select id="space" name="space" required aria-describedby="spaceHelp">
      <option value="" disabled selected>انتخاب کنید...</option>
      <option value="living">پذیرایی</option>
      <option value="kids">اتاق کودک</option>
      <option value="kitchen">آشپزخانه</option>
      <option value="bathroom">حمام</option>
      <option value="office">فضای کار</option>
    </select>
    <small id="spaceHelp" class="helper-text">فضای مورد نظر را انتخاب کنید</small>

    <label for="length">طول (متر)</label>
    <input type="number" id="length" name="length" min="0.5" step="0.1" required placeholder="مثلاً ۴.۵" aria-describedby="lengthHelp" />
    <small id="lengthHelp" class="helper-text">طول اتاق را وارد کنید (متر)</small>

    <label for="width">عرض (متر)</label>
    <input type="number" id="width" name="width" min="0.5" step="0.1" required placeholder="مثلاً ۳.۲" aria-describedby="widthHelp" />
    <small id="widthHelp" class="helper-text">عرض اتاق را وارد کنید (متر)</small>

    <label for="height">ارتفاع (متر)</label>
    <input type="number" id="height" name="height" min="1" step="0.1" required placeholder="مثلاً ۲.۸" aria-describedby="heightHelp" />
    <small id="heightHelp" class="helper-text">ارتفاع سقف را وارد کنید (متر)</small>

    <label for="walls">تعداد دیوارها</label>
    <input type="number" id="walls" name="walls" min="1" max="6" step="1" required placeholder="مثلاً ۴" aria-describedby="wallsHelp" />
    <small id="wallsHelp" class="helper-text">تعداد دیوارهایی که رنگ یا کاغذ می‌خورند</small>

    <label for="windows">متراژ پنجره‌ها (متر مربع)</label>
    <input type="number" id="windows" name="windows" min="0" step="0.1" value="0" required placeholder="مثلاً ۲.۵" aria-describedby="windowsHelp" />
    <small id="windowsHelp" class="helper-text">متراژ پنجره‌ها را برای کسر کردن وارد کنید</small>

    <label for="wallMaterial">جنس دیوار</label>
    <select id="wallMaterial" name="wallMaterial" required aria-describedby="wallMaterialHelp">
      <option value="" disabled selected>انتخاب کنید...</option>
      <option value="plaster">گچی</option>
      <option value="cement">سیمانی</option>
      <option value="painted">رنگ‌شده قبلی</option>
      <option value="papered">کاغذدیواری</option>
    </select>
    <small id="wallMaterialHelp" class="helper-text">جنس دیوار را انتخاب کنید</small>

    <label for="finishType">نوع پوشش نهایی</label>
    <select id="finishType" name="finishType" required aria-describedby="finishTypeHelp">
      <option value="" disabled selected>انتخاب کنید...</option>
      <option value="paintPlastic">رنگ پلاستیکی</option>
      <option value="paintAcrylic">رنگ اکریلیک</option>
      <option value="paintOil">رنگ روغنی</option>
      <option value="wallpaper">کاغذدیواری</option>
    </select>
    <small id="finishTypeHelp" class="helper-text">نوع رنگ یا کاغذدیواری را انتخاب کنید</small>

    <button type="submit" aria-label="محاسبه متراژ و قیمت">محاسبه</button>
  </form>

  <section class="result-box" id="result" aria-live="polite" aria-atomic="true" tabindex="0"></section>
</div>

<script>
  // تم تاریک روشن
  const toggleBtn = document.getElementById('toggleTheme');
  toggleBtn.onclick = () => {
    document.body.classList.toggle('dark');
    if(document.body.classList.contains('dark')) {
      toggleBtn.textContent = '☀️';
      toggleBtn.setAttribute('aria-label', 'تغییر به تم روشن');
    } else {
      toggleBtn.textContent = '🌙';
      toggleBtn.setAttribute('aria-label', 'تغییر به تم تاریک');
    }
  };

  // فرم و محاسبات
  const form = document.getElementById('calcForm');
  const resultBox = document.getElementById('result');

  // قیمت‌ها (تومان بر متر مربع)
  const pricePerSqm = {
    plaster: 25000,
    cement: 20000,
    painted: 22000,
    papered: 30000
  };

  const finishPriceMultiplier = {
    paintPlastic: 1,
    paintAcrylic: 1.3,
    paintOil: 1.6,
    wallpaper: 1.7
  };

  // پیشنهادها براساس فضا
  const suggestions = {
    living: 'برای پذیرایی: رنگ‌های روشن
